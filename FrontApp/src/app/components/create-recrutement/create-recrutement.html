<div class="form-container">
    
    <!-- Header -->
    <div class="header-section">
        <h2 class="header-title">
            <svg xmlns="http://www.w3.org/2000/svg" class="header-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M12 14c-4 0-6 2-6 4v2h12v-2c0-2-2-4-6-4zM12 12a4 4 0 100-8 4 4 0 000 8zm7 2h2m-1-1v2" />
            </svg>
            New hiring process
        </h2>
        <button class="close-button" (click)="onClose()">
            <mat-icon>close</mat-icon>
        </button>
    </div>

    <div class="candidate-info-section">
        <span *ngIf="errorMessage !== ''" class="error-message">{{errorMessage}}</span>
        <div class="candidate-card-wrapper">
            <div class="candidate-card">
                <div class="candidate-details">
                    <div class="candidate-info">
                        <div class="candidate-name-section">
                            <span class="candidate-label">Candidate : </span>
                            <span class="candidate-name">{{ data.nom }} {{data.prenom}}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="form-content">

        <form [formGroup]="recrutementForm" (ngSubmit)="onSubmit()" class="form-fields">

            <!-- Poste (position) Field -->
            <div class="field-group">
            <label for="poste" class="field-label">
                Position<span class="required-asterisk">*</span>
            </label>
            <input 
                id="poste"
                type="text"
                formControlName="poste"
                placeholder="Enter desired position"
                class="form-input"
                [class.error]="recrutementForm.get('poste')?.invalid && recrutementForm.get('poste')?.touched"
            >
            <p *ngIf="recrutementForm.get('poste')?.invalid && recrutementForm.get('poste')?.touched" 
                class="error-text">
                <svg xmlns="http://www.w3.org/2000/svg" class="error-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                </svg>
                Please provide a correct position
            </p>
            </div>

            <!-- Date of HR interview Field -->
            <!--div class="relative">
                <label for="date" class="absolute -top-2.5 left-2 inline-block bg-white px-1 text-xs font-medium text-gray-600">
                    HR interview<span class="text-red-500">*</span>
                </label>
                <input 
                    id="date"
                    type="datetime-local"
                    formControlName="date"
                    placeholder="Enter desired position"
                    class="mt-1 block w-full px-4 py-3 border-2 rounded-lg focus:ring-0 transition duration-200
                        {{recrutementForm.get('date')?.invalid && recrutementForm.get('date')?.touched ? 
                            'border-red-400 focus:border-red-500' : 
                            'border-gray-200 focus:border-red-600'}}"
                >
                <p *ngIf="recrutementForm.get('date')?.invalid && recrutementForm.get('date')?.touched" 
                    class="mt-1 text-sm text-red-600 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                    </svg>
                    Please provide a correct date
                </p>
            </!--div-->

            <!-- Manager Select Field -->
            <div class="field-group">
                <label for="manager" class="field-label">
                    Manager<span class="required-asterisk">*</span>
                </label>

                <mat-form-field appearance="outline" class="manager-select">
                    <mat-select 
                        id="manager"
                        formControlName="manager" 
                        placeholder="Select a manager"
                        [disableOptionCentering]="true">
                        <mat-option *ngFor="let manager of users" [value]="manager">
                            {{ manager.fullName }}
                        </mat-option>
                    </mat-select>
                </mat-form-field>

                <p *ngIf="recrutementForm.get('manager')?.invalid && recrutementForm.get('manager')?.touched" 
                    class="error-text">
                    <svg xmlns="http://www.w3.org/2000/svg" class="error-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                            d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 
                            1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 
                            0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                    </svg>
                    Please provide a correct manager
                </p>
            </div>
            
            <div class="button-section">
            <button 
                type="button" 
                class="cancel-button"
                (click)="closeForm()"
            >
                Cancel
            </button>
            <button 
                type="submit" 
                class="submit-button"
                [disabled]="recrutementForm.invalid || isSubmitting"
            >
                <span *ngIf="!isSubmitting">Submit</span>
                <span *ngIf="isSubmitting" class="loading-content">
                    <svg class="loading-spinner" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    Processing...
                </span>
            </button>
            </div>
        </form>
    </div>
</div>