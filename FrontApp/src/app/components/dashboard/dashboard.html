<div class="dashboard-container">
  <!-- Page Header -->
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">Dashboard</h1>
      <p class="page-subtitle">Welcome to your recruitment dashboard</p>
    </div>
  </div>

  <!-- Main Content -->
  <div class="dashboard-content">
    
    <!-- Left Section - Statistics/Charts (Future expansion) -->
    <div class="dashboard-left">
      <div class="stats-placeholder">
        <div class="stats-card">
          <div class="stats-icon">
            <span class="material-symbols-outlined">analytics</span>
          </div>
          <div class="stats-content">
            <h3>Quick Stats</h3>
            <p>Analytics and reports coming soon</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Section - To Review Table -->
    <div class="dashboard-right">

      <!-- To Review Card -->
      <div class="review-card">
        <div class="card-header">
          <div class="header-icon">
            <span class="material-symbols-outlined">pending_actions</span>
          </div>
          <div class="header-text">
            <h2>To Review</h2>
            <p>Candidates requiring your attention</p>
          </div>
        </div>

        <div class="card-content">
          <!-- Table -->
          <div class="table-container" *ngIf="candidates.length !== 0 && !isLoading">
            <table mat-table [dataSource]="candidates" class="candidates-table">
              
              <ng-container matColumnDef="fullName">
                <th mat-header-cell *matHeaderCellDef class="table-header">Full Name</th>
                <td mat-cell *matCellDef="let candidate" class="table-cell">{{candidate.fullName}}</td>
              </ng-container>

              <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef class="table-header">Status</th>
                <td mat-cell *matCellDef="let candidate" class="table-cell">
                  @switch (candidate.statut) {
                    @case ('IN_PROGRESS') {
                      <span class="status-badge status-in-progress">{{ candidate.statut }}</span>
                    }
                    @case ("CONTACTED") {
                      <span class="status-badge status-contacted">{{ candidate.statut }}</span>
                    }
                  }
                </td>
              </ng-container>

              <ng-container matColumnDef="evaluationType">
                <th mat-header-cell *matHeaderCellDef class="table-header">Interview</th>
                <td mat-cell *matCellDef="let candidate" class="table-cell">{{candidate.evaluationType}}</td>
              </ng-container>

              <ng-container matColumnDef="date">
                <th mat-header-cell *matHeaderCellDef class="table-header">Date</th>
                <td mat-cell *matCellDef="let candidate" class="table-cell">{{candidate.date | date:'dd/MM/yyyy'}}</td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;" 
                  class="table-row"
                  (click)="openHistory(row)"></tr>
            </table>
          </div>

          <!-- Empty State -->
          <div class="empty-state" *ngIf="candidates.length === 0 && !isLoading">
            <div class="empty-icon">
              <span class="material-symbols-outlined">search_off</span>
            </div>
            <h3>No Reviews Pending</h3>
            <p>All candidates have been reviewed. Great job!</p>
          </div>

          <!-- Loading State -->
          <div class="loading-state" *ngIf="isLoading">
            <div class="loading-spinner">
              <svg class="spinner" viewBox="0 0 24 24">
                <circle class="spinner-circle" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"></circle>
                <path class="spinner-path" fill="currentColor"
                    d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
              </svg>
            </div>
            <span class="loading-text">Loading candidates...</span>
          </div>
        </div>
      </div>

      <!-- Status Guide Card -->
      <div class="guide-card">
        <div class="guide-header">
          <div class="guide-icon">
            <span class="material-symbols-outlined">help</span>
          </div>
          <h3>Candidate Status Guide</h3>
        </div>
        
        <div class="guide-content">
          <div class="guide-item">
            <span class="status-badge status-contacted">CONTACTED</span>
            <div class="guide-description">
              Indicates a candidate who has been initially reached out to but does not yet have an active recruitment process in place.
            </div>
          </div>
          
          <div class="guide-item">
            <span class="status-badge status-in-progress">IN_PROGRESS</span>
            <div class="guide-description">
              Refers to a candidate who is currently in the recruitment pipeline with feedback-pending interviews.
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
