<!-- Enhanced Angular Interview Form with Modern Material Design -->
<div class="interview-container">
  
    <div class="header-section">
        <h2 class="header-title">
            <span class="header-icon">
            assignment
            </span>
            New interview
        </h2>
    </div>
  
    <div class="content-section">
        <form [formGroup]="newInterviewForm" class="interview-form" (ngSubmit)="save()">
            <!-- Date Input -->
            <div class="field-group">
                <label class="field-label">Interview Time</label>
                
                <div class="datetime-container">

                  <div class="datetime-fields">

                    <mat-form-field class="date-field">
                      <mat-label>Date</mat-label>
                      <input matInput [matDatepicker]="datepicker" 
                        formControlName="selectedDate"
                      >
                      <mat-datepicker #datepicker/>
                      <mat-datepicker-toggle [for]="datepicker" matSuffix/>
                    </mat-form-field>

                    <mat-form-field class="time-field">
                      <mat-label>Time</mat-label>
                      <input 
                        matInput
                        [matTimepicker]="timepicker"
                        matTimepickerMin="08:00"
                        matTimepickerMax="19:00"
                        formControlName="selectedTime"
                        >
                      <mat-timepicker interval="15min" #timepicker/>
                      <mat-timepicker-toggle [for]="timepicker" matSuffix/>
                    </mat-form-field>

                  </div>


                  <p *ngIf="newInterviewForm.get('date')?.invalid && ( newInterviewForm.get('selectedDate')?.touched && newInterviewForm.get('selectedDate')?.invalid  || newInterviewForm.get('selectedTime')?.touched && newInterviewForm.get('selectedTime')?.invalid ) " 
                    class="error-text">
                    <svg xmlns="http://www.w3.org/2000/svg" class="error-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                    </svg>
                    Please provide an interview date
                  </p>

                </div>
            </div>


            <!-- Interview Type -->
            <div class="field-group">
              <label class="field-label">Interview Type</label>
              <select 
                  formControlName="type"
                  name="type" 
                  (change)="onTypeChange($event)"
                  required
                  class="form-select"
                  [class.error]="newInterviewForm.get('type')?.invalid && newInterviewForm.get('type')?.touched"
              >
                  <option value="" disabled selected>Select Type</option>
                  <option value="TECHNIQUE">Tech</option>
                  <option value="RH">RH</option>
                  <option value="MANAGERIAL">Managerial</option>
              </select>

              <div class="select-arrow">
                  <svg class="arrow-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                  </svg>
              </div>

              <p *ngIf="newInterviewForm.get('type')?.invalid && newInterviewForm.get('type')?.touched" 
                class="error-text">
                <svg xmlns="http://www.w3.org/2000/svg" class="error-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                </svg>
                Please provide a type
              </p>
            </div>

            <!-- Evaluator -->
            <div class="field-group">
                <label class="field-label">Evaluator</label>
                <select 
                  formControlName="evaluator"
                  name="evaluator" 
                  required
                  class="form-select"
                  [class.error]="newInterviewForm.get('evaluator')?.value === 0 && newInterviewForm.get('evaluator')?.touched"
                >
                    <option value="" disabled selected>Select Evaluator</option>
                    <option *ngFor="let user of users" [value]="user.id">
                        {{ user.fullName }}
                    </option>
                </select>
                <!-- Custom dropdown arrow -->
                <div class="select-arrow">
                    <svg class="arrow-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </div>

                <span *ngIf="newInterviewForm.get('type')?.value === ''" class="helper-text">Select the type of interview first</span>
                <p *ngIf="newInterviewForm.get('evaluator')?.value === 0 && newInterviewForm.get('evaluator')?.touched" 
                    class="error-text">
                    <svg xmlns="http://www.w3.org/2000/svg" class="error-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                    </svg>
                    Please provide an evaluator
                </p>
            </div>

            <!-- Interview location  -->
            <div class="field-group">
              <label class="field-label">Interview Location</label>
              <select 
                formControlName="lieuEvaluation"
                name="type" 
                required
                class="form-select"
                [class.error]="newInterviewForm.get('lieuEvaluation')?.invalid && newInterviewForm.get('lieuEvaluation')?.touched"
              >
                <option value="" disabled selected>Select interview location</option>
                <option value="ONLINE">Online</option>
                <option value="PRESENTIEL">On site</option>
              </select>

              <!-- Custom dropdown arrow -->
              <div class="select-arrow">
                  <svg class="arrow-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                  </svg>
              </div>

              <p *ngIf="newInterviewForm.get('lieuEvaluation')?.invalid && newInterviewForm.get('lieuEvaluation')?.touched" 
                  class="error-text">
                  <svg xmlns="http://www.w3.org/2000/svg" class="error-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                  </svg>
                  Please provide a location
              </p>
            </div>

            <!-- Action Buttons -->
            <div class="button-section">
            <button 
                type="submit"
                class="btn-primary"
                [disabled]="newInterviewForm.invalid || isSubmitting"
            >
                Save
            </button>
            <button 
                type="button"
                (click)="dialogRef.close()"
                class="btn-secondary"
            >
                Cancel
            </button>
            </div>
        </form>
    </div>
</div>